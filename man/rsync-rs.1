'\" t
.\" Automatically generated by Pandoc 3.1.3
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "" "" "" "" ""
.hy
.SH Command Line Interface
.PP
The \f[V]rsync-rs\f[R] binary aims to mirror the familiar
\f[V]rsync\f[R] experience.
An overview of project goals and features is available in the README,
and a high-level summary of CLI goals lives in the README\[cq]s CLI
section.
.SS Usage
.IP
.nf
\f[C]
rsync-rs [OPTIONS] <SRC> <DEST>
\f[R]
.fi
.SS Examples
.IP \[bu] 2
Local directory sync:
.RS 2
.IP
.nf
\f[C]
rsync-rs ./src ./backup
\f[R]
.fi
.RE
.IP \[bu] 2
Remote sync over SSH:
.RS 2
.IP
.nf
\f[C]
rsync-rs ./src user\[at]example.com:/var/www
\f[R]
.fi
.RE
.IP \[bu] 2
Dry run with statistics:
.RS 2
.IP
.nf
\f[C]
rsync-rs -n --stats ./src remote:/dst
\f[R]
.fi
.RE
.IP \[bu] 2
Sync using an explicit config file:
.RS 2
.IP
.nf
\f[C]
rsync-rs --config ./rsync-rs.toml ./src remote:/dst
\f[R]
.fi
.RE
.IP \[bu] 2
Mirror with exclusions and deletions:
.RS 2
.IP
.nf
\f[C]
rsync-rs -a --delete --exclude \[aq].cache/\[aq] ./src/ ./mirror/
\f[R]
.fi
.RE
.IP \[bu] 2
Incremental backup using hard links:
.RS 2
.IP
.nf
\f[C]
rsync-rs -a --link-dest=../prev --compare-dest=../base ./src/ ./snapshot/
\f[R]
.fi
.RE
.IP \[bu] 2
Throttled modern compression:
.RS 2
.IP
.nf
\f[C]
rsync-rs -az --modern --bwlimit=1m ./src/ host:/archive/
\f[R]
.fi
.RE
.SS Trailing slash semantics
.PP
Just like \f[V]rsync\f[R], adding a trailing slash to the source path
changes what is copied:
.IP \[bu] 2
\f[V]rsync-rs src/ dest/\f[R] copies the \f[I]contents\f[R] of
\f[V]src\f[R] into \f[V]dest\f[R].
.IP \[bu] 2
\f[V]rsync-rs src dest/\f[R] creates a \f[V]dest/src\f[R] directory
containing the original files.
.IP \[bu] 2
\f[V]rsync-rs remote:/src/ local/\f[R] pulls the contents of
\f[V]/src\f[R] from the remote host into \f[V]local\f[R].
.SS Options
.PP
.TS
tab(@);
lw(14.0n) lw(12.0n) lw(18.0n) lw(26.0n).
T{
Short
T}@T{
Long
T}@T{
Default
T}@T{
Description
T}
_
T{
\f[V]-v\f[R]
T}@T{
\f[V]--verbose\f[R]
T}@T{
off
T}@T{
increase verbosity
T}
T{
\f[V]-q\f[R]
T}@T{
\f[V]--quiet\f[R]
T}@T{
off
T}@T{
suppress non-error messages
T}
T{
T}@T{
\f[V]--no-motd\f[R]
T}@T{
off
T}@T{
suppress daemon-mode MOTD
T}
T{
\f[V]-c\f[R]
T}@T{
\f[V]--checksum\f[R]
T}@T{
off
T}@T{
skip based on checksum, not mod-time & size
T}
T{
\f[V]-a\f[R]
T}@T{
\f[V]--archive\f[R]
T}@T{
off
T}@T{
archive mode is -rlptgoD (no -A,-X,-U,-N,-H)
T}
T{
\f[V]-r\f[R]
T}@T{
\f[V]--recursive\f[R]
T}@T{
off
T}@T{
recurse into directories
T}
T{
\f[V]-R\f[R]
T}@T{
\f[V]--relative\f[R]
T}@T{
off
T}@T{
use relative path names
T}
T{
\f[V]-I\f[R]
T}@T{
\f[V]--inplace\f[R]
T}@T{
off
T}@T{
update destination files in-place
T}
T{
T}@T{
\f[V]--append\f[R]
T}@T{
off
T}@T{
append data onto shorter files
T}
T{
T}@T{
\f[V]--append-verify\f[R]
T}@T{
off
T}@T{
\[en]append w/old data in file checksum
T}
T{
\f[V]-l\f[R]
T}@T{
\f[V]--links\f[R]
T}@T{
off
T}@T{
copy symlinks as symlinks
T}
T{
T}@T{
\f[V]--hard-links\f[R]
T}@T{
off
T}@T{
preserve hard links
T}
T{
T}@T{
\f[V]--perms\f[R]
T}@T{
off
T}@T{
preserve permissions
T}
T{
T}@T{
\f[V]--acls\f[R]
T}@T{
off
T}@T{
preserve ACLs (implies \[en]perms)
T}
T{
T}@T{
\f[V]--xattrs\f[R]
T}@T{
off
T}@T{
preserve extended attributes
T}
T{
T}@T{
\f[V]--owner\f[R]
T}@T{
off
T}@T{
preserve owner (super-user only)
T}
T{
T}@T{
\f[V]--group\f[R]
T}@T{
off
T}@T{
preserve group
T}
T{
T}@T{
\f[V]--devices\f[R]
T}@T{
off
T}@T{
preserve device files (super-user only)
T}
T{
T}@T{
\f[V]--specials\f[R]
T}@T{
off
T}@T{
preserve special files
T}
T{
T}@T{
\f[V]--times\f[R]
T}@T{
off
T}@T{
preserve modification times
T}
T{
\f[V]-U\f[R]
T}@T{
\f[V]--atimes\f[R]
T}@T{
off
T}@T{
preserve access (use) times
T}
T{
\f[V]-N\f[R]
T}@T{
\f[V]--crtimes\f[R]
T}@T{
off
T}@T{
preserve create times (newness)
T}
T{
\f[V]-S\f[R]
T}@T{
\f[V]--sparse\f[R]
T}@T{
off
T}@T{
turn sequences of nulls into sparse blocks
T}
T{
\f[V]-n\f[R]
T}@T{
\f[V]--dry-run\f[R]
T}@T{
off
T}@T{
perform a trial run with no changes made
T}
T{
\f[V]-e\f[R]
T}@T{
\f[V]--rsh=COMMAND\f[R]
T}@T{
\f[V]ssh\f[R]
T}@T{
specify the remote shell to use
T}
T{
T}@T{
\f[V]--rsync-path=PROGRAM\f[R]
T}@T{
none
T}@T{
specify the rsync to run on remote machine
T}
T{
T}@T{
\f[V]--delete\f[R]
T}@T{
off
T}@T{
delete extraneous files from dest dirs
T}
T{
T}@T{
\f[V]--delete-before\f[R]
T}@T{
off
T}@T{
receiver deletes before transfer, not during
T}
T{
T}@T{
\f[V]--delete-during\f[R] (\f[V]--del\f[R])
T}@T{
off
T}@T{
receiver deletes during the transfer
T}
T{
T}@T{
\f[V]--delete-delay\f[R]
T}@T{
off
T}@T{
find deletions during, delete after
T}
T{
T}@T{
\f[V]--delete-after\f[R]
T}@T{
off
T}@T{
receiver deletes after transfer, not during
T}
T{
T}@T{
\f[V]--delete-excluded\f[R]
T}@T{
off
T}@T{
also delete excluded files from dest dirs
T}
T{
T}@T{
\f[V]--partial\f[R]
T}@T{
off
T}@T{
keep partially transferred files
T}
T{
T}@T{
\f[V]--partial-dir=DIR\f[R]
T}@T{
none
T}@T{
put a partially transferred file into DIR
T}
T{
T}@T{
\f[V]--numeric-ids\f[R]
T}@T{
off
T}@T{
don\[cq]t map uid/gid values by user/group name
T}
T{
T}@T{
\f[V]--compare-dest=DIR\f[R]
T}@T{
none
T}@T{
also compare destination files relative to DIR
T}
T{
T}@T{
\f[V]--copy-dest=DIR\f[R]
T}@T{
none
T}@T{
\&...
and include copies of unchanged files
T}
T{
T}@T{
\f[V]--link-dest=DIR\f[R]
T}@T{
none
T}@T{
hardlink to files in DIR when unchanged
T}
T{
T}@T{
\f[V]--config=FILE\f[R]
T}@T{
none
T}@T{
specify alternate config file
T}
T{
\f[V]-z\f[R]
T}@T{
\f[V]--compress\f[R]
T}@T{
off
T}@T{
compress file data during the transfer
T}
T{
T}@T{
\f[V]--compress-choice=STR\f[R]
T}@T{
auto
T}@T{
choose the compression algorithm
T}
T{
T}@T{
\f[V]--compress-level=NUM\f[R]
T}@T{
auto
T}@T{
explicitly set compression level
T}
T{
T}@T{
\f[V]--modern\f[R]
T}@T{
off
T}@T{
enable zstd compression and BLAKE3 checksums (rsync-rs specific)
T}
T{
\f[V]-f\f[R]
T}@T{
\f[V]--filter=RULE\f[R]
T}@T{
none
T}@T{
add a file-filtering RULE
T}
T{
\f[V]-F\f[R]
T}@T{
T}@T{
off
T}@T{
same as \[en]filter=`dir-merge /.rsync-filter' repeated: \[en]filter=`-
\&.rsync-filter'
T}
T{
T}@T{
\f[V]--exclude=PATTERN\f[R]
T}@T{
none
T}@T{
exclude files matching PATTERN
T}
T{
T}@T{
\f[V]--exclude-from=FILE\f[R]
T}@T{
none
T}@T{
read exclude patterns from FILE
T}
T{
T}@T{
\f[V]--include=PATTERN\f[R]
T}@T{
none
T}@T{
don\[cq]t exclude files matching PATTERN
T}
T{
T}@T{
\f[V]--include-from=FILE\f[R]
T}@T{
none
T}@T{
read include patterns from FILE
T}
T{
T}@T{
\f[V]--files-from=FILE\f[R]
T}@T{
none
T}@T{
read list of source-file names from FILE
T}
T{
\f[V]-0\f[R]
T}@T{
\f[V]--from0\f[R]
T}@T{
off
T}@T{
all *-from/filter files are delimited by 0s
T}
T{
T}@T{
\f[V]--stats\f[R]
T}@T{
off
T}@T{
give some file-transfer stats
T}
T{
T}@T{
\f[V]--progress\f[R]
T}@T{
off
T}@T{
show progress during transfer
T}
T{
\f[V]-P\f[R]
T}@T{
T}@T{
off
T}@T{
same as \[en]partial \[en]progress
T}
T{
T}@T{
\f[V]--password-file=FILE\f[R]
T}@T{
none
T}@T{
read daemon-access password from FILE
T}
T{
T}@T{
\f[V]--bwlimit=RATE\f[R]
T}@T{
none
T}@T{
limit socket I/O bandwidth
T}
T{
T}@T{
\f[V]--daemon\f[R]
T}@T{
off
T}@T{
run as an rsync daemon
T}
T{
T}@T{
\f[V]--module NAME=PATH\f[R]
T}@T{
none
T}@T{
module declaration (daemon mode)
T}
T{
T}@T{
\f[V]--address=ADDR\f[R]
T}@T{
0.0.0.0
T}@T{
bind address for daemon
T}
T{
T}@T{
\f[V]--port=PORT\f[R]
T}@T{
873
T}@T{
port to listen on (daemon mode)
T}
T{
T}@T{
\f[V]--secrets-file=FILE\f[R]
T}@T{
none
T}@T{
path to secrets file for authentication
T}
T{
T}@T{
\f[V]--hosts-allow=LIST\f[R]
T}@T{
none
T}@T{
list of hosts allowed to connect
T}
T{
T}@T{
\f[V]--hosts-deny=LIST\f[R]
T}@T{
none
T}@T{
list of hosts denied from connecting
T}
T{
T}@T{
\f[V]--log-file=FILE\f[R]
T}@T{
none
T}@T{
log what we\[cq]re doing to the specified FILE
T}
T{
T}@T{
\f[V]--log-file-format=FMT\f[R]
T}@T{
none
T}@T{
log updates using the specified FMT
T}
T{
T}@T{
\f[V]--motd=FILE\f[R]
T}@T{
none
T}@T{
path to message of the day file
T}
.TE
.PP
Flags such as \f[V]-P\f[R] and \f[V]--numeric-ids\f[R] mirror their
\f[V]rsync\f[R] behavior.
See the CLI flag reference for implementation details and notes.
.SS Configuration precedence
.IP "1." 3
Command-line flags
.IP "2." 3
Environment variables (prefixed with \f[V]RSYNC_RS_\f[R])
.IP "3." 3
Configuration file provided via \f[V]--config\f[R]
.IP "4." 3
Built-in defaults
.PP
No configuration file is loaded unless \f[V]--config\f[R] is supplied.
Settings specified earlier in the list override later sources.
.SS Filters
.PP
\f[V]rsync-rs\f[R] supports include and exclude rules using the same
syntax as \f[V]rsync\f[R].
Rules can be supplied on the command line with \f[V]--filter\f[R] or
placed in \f[V].rsync-filter\f[R] files located throughout the source
tree.
When walking directories the tool automatically loads any
\f[V].rsync-filter\f[R] files and merges their rules with those from
parent directories.
Rules in deeper directories take precedence over rules defined higher
up.
.SS Example
.IP
.nf
\f[C]
project/
├── .rsync-filter      # contains: - *.tmp
└── logs/
    ├── .rsync-filter  # contains: + keep.tmp
    ├── keep.tmp
    └── other.tmp
\f[R]
.fi
.PP
In this layout, \f[V]keep.tmp\f[R] is included because the rule in
\f[V]logs/.rsync-filter\f[R] overrides the root exclusion.
The file \f[V]other.tmp\f[R] remains excluded.
