.\" Automatically generated by Pandoc 3.1.3
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "" "" "" "" ""
.hy
.SH Modern Mode
.PP
oc-rsync implements the upstream rsync protocol version 31 and adds a
private protocol 73 extension for optional features.
Protocol 73 is negotiated when both peers invoke \f[V]oc-rsync\f[R] with
the \f[V]--modern\f[R] flag or one of its sub-flags.
.SS Stronger checksums
.PP
\f[V]--modern\f[R] or \f[V]--modern-hash\f[R] upgrades the strong file
checksum to BLAKE3 when supported.
This provides better error detection than MD5 or SHA-1 while remaining
fast.
.SS Enhanced compression
.PP
Modern mode prefers zstd compression and also supports lz4 through the
\f[V]--modern-compress\f[R] option.
\f[V]--modern-compress=auto\f[R] inspects the CPU at runtime: zstd is
chosen only when AVX2 or AVX-512 are available on x86, or when NEON or
SVE are present on aarch64.
Without those SIMD features the code falls back to lz4 if enabled,
otherwise compression is disabled.
When both peers support the algorithm the most efficient codec is
selected automatically.
.SS Content-defined chunking
.PP
The \f[V]--modern-cdc\f[R] flag enables FastCDC chunking to improve
delta reuse between runs.
This is only activated when both sides negotiate protocol 73.
.PP
All modern features require both peers to speak protocol 73; transfers
fall back to stock rsync semantics when a peer does not advertise
support.
